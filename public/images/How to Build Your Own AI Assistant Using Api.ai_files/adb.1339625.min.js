/*  AdBridg Connect v1.0.1, copyright AdBridg Inc. All rights reserved. */
/* Portions of this software are derived from PrebidJS (prebid.org) under the Apache 2.0 license (http://www.apache.org/licenses/LICENSE-2.0). The PrebidJS source code may be found at https://github.com/prebid/Prebid.js. */
!function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){var s="function"==typeof require&&require;if(!o&&s)return s(a,!0);if(d)return d(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var d="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){function n(e,t){e&&t?typeof e.callBids===f.objectType_function?p[t]=e:l.logError("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):l.logError("bidAdaptor or bidderCode not specified")}var r=e("./adapters/appnexus.js"),d=e("./adapters/aol"),a=e("./adapters/sovrn"),o=e("./adapters/index"),s=e("./adapters/sonobi"),c=e("./adapters/pulsepoint"),u=e("./bidmanager.js"),l=e("./utils.js"),g=e("./adbridg/analytics"),f=e("./constants.json"),p={};i.callBids=function(e){g.biddingStarted(e);for(var t=0;t<e.length;t++){var i=e[t];if(i.bidderCode&&p[i.bidderCode]){l.logMessage("CALLING BIDDER ======= "+i.bidderCode);var n=p[i.bidderCode];n.callBids(i);var r=(new Date).getTime();u.registerBidRequestTime(i.bidderCode,r),n.defaultBidderSettings&&u.registerDefaultBidderSetting(i.bidderCode,n.defaultBidderSettings)}}},i.hasAdapter=function(e){return!!p[e]},n(r("cpxi"),"cpxi"),n(r("appnexus"),"appnexus"),n(d(),"aol"),n(a(),"sovrn"),n(o(),"index"),n(s(),"sonobi"),n(c(),"pulsepoint")},{"./adapters/aol":2,"./adapters/appnexus.js":3,"./adapters/index":4,"./adapters/pulsepoint":5,"./adapters/sonobi":6,"./adapters/sovrn":7,"./adbridg/analytics":8,"./bidmanager.js":15,"./constants.json":16,"./utils.js":18}],2:[function(e,t,i){var n=e("../utils.js"),r=e("../bidfactory.js"),d=e("../bidmanager.js"),a=e("../adloader"),o=function(){function e(e){var t=h.createElement("DIV");return e&&e.length||(e="ad-placeholder-"+ ++m),t.id=e+"-head-unit",b.appendChild(t),t.id}function t(e,t){var a,o=p[t.alias];if(!o)return void n.logError("mismatched bid: "+t.placement,g,t);if(a=e.getCPM(),null===a||isNaN(a))return i(e,t);delete p[t.alias];var s=r.createBid(1),c=e.getCreative();"undefined"!=typeof e.getPixels()&&(c+=e.getPixels()),s.bidderCode=g,s.ad=c,s.cpm=a,s.width=e.getAdWidth(),s.height=e.getAdHeight(),s.creativeId=e.getCreativeId(),s.adbuid=o.adbuid,s.adbbdr=o.adbbdr,s.adbbuid=o.adbbuid,s.adbinfo=[2,e.getCreativeId(),(o.params||{}).bidFloor],d.addBidResponse(o.placementCode,s)}function i(e,t){var i=p[t.alias];if(!i)return void n.logError("mismatched bid: "+t.placement,g,t);delete p[t.alias];var a=r.createBid(2);a.bidderCode=g,a.reason=e.getNbr(),a.raw=e.getResponse(),a.adbuid=i.adbuid,a.adbbdr=i.adbbdr,a.adbbuid=i.adbbuid,d.addBidResponse(i.placementCode,a)}function o(t){var i=t.params.alias||n.getUniqueIdentifierStr();return p[i]=t,{adContainerId:e(t.params.adContainerId),server:t.params.server,sizeid:t.params.sizeId||0,pageid:t.params.pageId,secure:"https:"===document.location.protocol,serviceType:"pubapi",performScreenDetection:!1,alias:i,network:t.params.network,placement:parseInt(t.params.placement),gpt:{adUnitPath:t.params.adUnitPath||t.placementCode,size:t.params.size||(t.sizes||[])[0]},params:{cors:"yes",cmd:"bid",bidfloor:"undefined"!=typeof t.params.bidFloor?t.params.bidFloor.toString():""},pubApiConfig:f,placementCode:t.placementCode}}function s(){return window.ADTECH?void n._each(u,function(e){var t=o(e);window.ADTECH.loadAd(t)}):void n.logError("window.ADTECH is not present!",g)}function c(e){window.bidRequestConfig=window.bidRequestConfig||{},window.dacBidRequestConfigs=window.dacBidRequestConfigs||{},u=e.bids,u&&u.length&&a.loadScript(l,s)}var u,l="https://secure-ads.pictela.net/rm/marketplace/pubtaglib/0_4_0/pubtaglib_0_4_0.js",g="aol",f={pixelsDivId:"pixelsDiv",defaultKey:"aolBid",roundingConfig:[{from:0,to:999,roundFunction:"tenCentsRound"},{from:1e3,to:-1,roundValue:1e3}],pubApiOK:t,pubApiER:i},p={},h=window.document,b=h.getElementsByTagName("HEAD")[0],m=0;return{callBids:c}};t.exports=o},{"../adloader":13,"../bidfactory.js":14,"../bidmanager.js":15,"../utils.js":18}],3:[function(e,t,i){var n=e("../constants.json"),r=e("../utils.js"),d=e("../adloader.js"),a=e("../bidmanager.js"),o=e("../bidfactory.js"),s=function(e){function t(e,t){var i=r.getBidIdParamater("placementId",e.params),n=r.getBidIdParamater("member",e.params),d=r.getBidIdParamater("invCode",e.params),a=r.getBidIdParamater("query",e.params),o=r.getBidIdParamater("referrer",e.params),s=r.getBidIdParamater("alt_referrer",e.params),c="http"+("https:"===document.location.protocol?"s://secure.adnxs.com/jpt?":"://ib.adnxs.com/jpt?");c=r.tryAppendQueryString(c,"callback","AdBridg.__anResponse"),c=r.tryAppendQueryString(c,"callback_uid",t),c=r.tryAppendQueryString(c,"psa","0"),c=r.tryAppendQueryString(c,"id",i),c=r.tryAppendQueryString(c,"member_id",n),c=r.tryAppendQueryString(c,"code",d);var u=r.parseSizesInput(e.sizes);u&&(c+=u+"&");var l=r.parseQueryStringParameters(a);l&&(c+=l);var g=r.extend({},e.params);delete g.placementId,delete g.invCode,delete g.query,delete g.referrer,delete g.alt_referrer,delete g.member;var f=r.parseQueryStringParameters(g);return f&&(c+=f),""===o&&(o=r.getTopWindowUrl()),c=r.tryAppendQueryString(c,"referrer",o),c=r.tryAppendQueryString(c,"alt_referrer",s),c.lastIndexOf("&")===c.length-1&&(c=c.substring(0,c.length-1)),c}var i=function(e){for(var i=e.bids,n=i.length,o=0;o<n;o++){var s=i[o],c=r.getUniqueIdentifierStr();d.loadScript(t(s,c)),a.pbCallbackMap[c]=s}};return AdBridg.__anResponse=r.tryBidHandler(function(e){var t,i;if(!e||!e.callback_uid)throw new Error("Invalid AN callback object");var r=e.callback_uid,d="",s=a.getPlacementIdByCBIdentifer(r);s&&(t=s.bidder,d=s.placementCode,s.status=n.STATUS.GOOD);var c=[];if(e.result&&e.result.cpm&&0!==e.result.cpm){i=parseInt(e.result.cpm,10),i=i/1e4*((s.params||{}).adjust||1);var u=e.result.creative_id;c=o.createBid(1),c.creative_id=u,c.bidderCode=t,c.cpm=i,c.adUrl=e.result.ad,c.width=e.result.width,c.height=e.result.height,c.dealId=e.result.deal_id,c.adbuid=s.adbuid,c.adbbdr=s.adbbdr,c.adbbuid=s.adbbuid,c.adbinfo=[1,u,c.dealId||0],a.addBidResponse(d,c)}else c=o.createBid(2),c.bidderCode=t,c.adbuid=s.adbuid,c.adbbdr=s.adbbdr,c.adbbuid=s.adbbuid,a.addBidResponse(d,c)}),{callBids:i}};t.exports=s},{"../adloader.js":13,"../bidfactory.js":14,"../bidmanager.js":15,"../constants.json":16,"../utils.js":18}],4:[function(e,t,i){var n=e("../utils.js"),r=e("../bidfactory.js"),d=e("../bidmanager.js"),a=e("../adloader.js"),o="INDEXEXCHANGE",s="index",c=function(){};window.cygnus_index_args={};var u=[[728,90],[120,600],[300,250],[160,600],[336,280],[234,60],[300,600],[300,50],[320,50],[970,250],[300,1050],[970,90],[180,150]],l=function(){function e(e){var t=d[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}function t(t){return r.lastIndex=0,r.test(t)?t.replace(r,e):t}function i(e,t,i){if(this.initialized=!1,"number"!=typeof e||e%1!==0||e<0)throw"Invalid Site ID";if("number"==typeof i&&i%1===0&&i>=0&&(this.timeoutDelay=i),this.siteID=e,this.impressions=[],this._parseFnName=void 0,top===self?(this.sitePage=location.href,this.topframe=1):(this.sitePage=document.referrer,this.topframe=0),"undefined"!=typeof t){if("function"!=typeof t)throw"Invalid jsonp target function";this._parseFnName="cygnus_index_args.parseFn"}"undefined"==typeof _IndexRequestData.requestCounter?_IndexRequestData.requestCounter=Math.floor(256*Math.random()):_IndexRequestData.requestCounter=(_IndexRequestData.requestCounter+1)%256,this.requestID=String((new Date).getTime()%2592e3*256+_IndexRequestData.requestCounter+256),this.initialized=!0}window.index_slots=[],window.cygnus_index_args.parseFn=c;var r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};i.prototype.serialize=function(){var e='{"id":'+this.requestID+',"site":{"page":"'+t(this.sitePage)+'"';"string"==typeof document.referrer&&(e+=',"ref":"'+t(document.referrer)+'"'),e+='},"imp":[';for(var i=0;i<this.impressions.length;i++){var n=this.impressions[i],r=[];e+='{"id":"'+n.id+'", "banner":{"w":'+n.w+',"h":'+n.h+',"topframe":'+String(this.topframe)+"}","number"==typeof n.bidfloor&&(e+=',"bidfloor":'+n.bidfloor,"string"==typeof n.bidfloorcur&&(e+=',"bidfloorcur":"'+t(n.bidfloorcur)+'"')),"string"!=typeof n.slotID||n.slotID.match(/^\s*$/)||r.push('"sid":"'+t(n.slotID)+'"'),"number"==typeof n.siteID&&r.push('"siteID":'+n.siteID),r.length>0&&(e+=',"ext": {'+r.join()+"}"),e+=i+1===this.impressions.length?"}":"},"}return e+="]}"},i.prototype.setPageOverride=function(e){return"string"==typeof e&&!e.match(/^\s*$/)&&(this.sitePage=e,!0)},i.prototype.addImpression=function(e,t,i,n,r,d){var a={id:String(this.impressions.length+1)};if("number"!=typeof e||e<=1)return null;if("number"!=typeof t||t<=1)return null;if(("string"==typeof r||"number"==typeof r)&&String(r).length<=50&&(a.slotID=String(r)),a.w=e,a.h=t,void 0!==i&&"number"!=typeof i)return null;if("number"==typeof i){if(i<0)return null;if(a.bidfloor=i,void 0!==n&&"string"!=typeof n)return null;a.bidfloorcur=n}if("undefined"!=typeof d){if(!("number"==typeof d&&d%1===0&&d>=0))return null;a.siteID=d}return this.impressions.push(a),a.id},i.prototype.buildRequest=function(){if(0!==this.impressions.length&&this.initialized===!0){var e=encodeURIComponent(this.serialize()),t="https:"===window.location.protocol?"https://as-sec.casalemedia.com":"http://as.casalemedia.com";return t+="/headertag?v=9&x3=1&fn=cygnus_index_parse_res&s="+this.siteID+"&r="+e,"number"==typeof this.timeoutDelay&&this.timeoutDelay%1===0&&this.timeoutDelay>=0&&(t+="&t="+this.timeoutDelay),t}};try{if("undefined"==typeof cygnus_index_args||"undefined"==typeof cygnus_index_args.siteID||"undefined"==typeof cygnus_index_args.slots)return;"undefined"==typeof window._IndexRequestData&&(window._IndexRequestData={},window._IndexRequestData.impIDToSlotID={},window._IndexRequestData.reqOptions={});var a=new i(cygnus_index_args.siteID,cygnus_index_args.parseFn,cygnus_index_args.timeout);cygnus_index_args.url&&"string"==typeof cygnus_index_args.url&&a.setPageOverride(cygnus_index_args.url),_IndexRequestData.impIDToSlotID[a.requestID]={},_IndexRequestData.reqOptions[a.requestID]={};for(var s,u,l=0;l<cygnus_index_args.slots.length;l++)s=cygnus_index_args.slots[l],u=a.addImpression(Number(s.width),Number(s.height),s.bidfloor,s.bidfloorcur,s.id,s.siteID),u&&(_IndexRequestData.impIDToSlotID[a.requestID][u]=String(s.id));return"number"==typeof cygnus_index_args.targetMode&&(_IndexRequestData.reqOptions[a.requestID].targetMode=cygnus_index_args.targetMode),"function"==typeof cygnus_index_args.callback&&(_IndexRequestData.reqOptions[a.requestID].callback=cygnus_index_args.callback),a.buildRequest()}catch(g){n.logError("Error calling index adapter",o,g)}},g=function(){function e(e){var h=e.bids;if(n.hasValidBidRequest(h[0].params,f,o)){cygnus_index_args.slots=[];for(var b=0,m=0;m<h.length;m++){var v=h[m],_=0;b++,v.sizes[0]instanceof Array||(v.sizes=[v.sizes]);for(var y=0;y<v.sizes.length;y++){for(var B=!1,w=0;w<u.length;w++)if(Number(v.sizes[y][0])===u[w][0]&&Number(v.sizes[y][1])===u[w][1]){B=!0;break}if(B){v.params.timeout&&"undefined"==typeof cygnus_index_args.timeout&&(cygnus_index_args.timeout=v.params.timeout);var A=Number(v.params.siteID);if(A&&(A&&"undefined"==typeof cygnus_index_args.siteID&&(cygnus_index_args.siteID=A),n.hasValidBidRequest(v.params,f,o))){p=v.placementCode;var I=v.params[f[0]];g[I]=v,_++;var S={width:v.sizes[y][0],height:v.sizes[y][1]},C=I+"_"+_;if(cygnus_index_args.slots=t({id:C,width:S.width,height:S.height,siteID:A||cygnus_index_args.siteID},cygnus_index_args.slots),v.params.tier2SiteID){var x=Number(v.params.tier2SiteID);if("undefined"!=typeof x&&!x)continue;cygnus_index_args.slots=t({id:"T1_"+C,width:S.width,height:S.height,siteID:x},cygnus_index_args.slots)}if(v.params.tier3SiteID){var T=Number(v.params.tier3SiteID);if("undefined"!=typeof T&&!T)continue;cygnus_index_args.slots=t({id:"T2_"+C,width:S.width,height:S.height,siteID:T},cygnus_index_args.slots)}}}}}cygnus_index_args.slots.length>20&&n.logError("Too many unique sizes on slots, will use the first 20.",o);var E=l();E&&a.loadScript(E);var D=!1;window.cygnus_index_ready_state=n.tryBidHandler(function(){if(!D){D=!0;try{var e=_IndexRequestData.targetIDToBid;cygnus_index_args;for(var t in g){var a=g[t],u=a.placementCode,l=[];for(var f in e){var p=/(T\d_)?(.+)_(\d+)_(\d+)/.exec(f),h=p[1]||"",b=p[2],m=p[3],v=p[4],_=b+"_"+m,y=i(cygnus_index_args,h+_);if(b===t){var B=r.createBid(1);B.cpm=v/100,B.ad=e[f][0],B.ad_id=t,B.bidderCode=s,B.width=y.width,B.height=y.height,B.siteID=y.siteID,l.push(B)}}var w=void 0;if(l.length>0)for(var A=0;A<l.length;A++){var B=l[A];"undefined"!=typeof w?B.cpm>w.cpm&&(w=B):w=B}else{var B=r.createBid(2);B.bidderCode=s,w=B}w.adbbdr=a.adbbdr,w.adbuid=a.adbuid,w.adbbuid=a.adbbuid,d.addBidResponse(u,w)}}catch(I){n.logError("Error calling index adapter",o,I),c()}g={}}})}}function t(e,t){for(var i=0;i<t.length;i++)if(e.id===t[i].id)return t;return t.push(e),t}function i(e,t){var i=e.slots,r={};return n._each(i,function(e){e.id===t&&(r=e)}),r}function c(){var e=r.createBid(2);e.bidderCode=s,d.addBidResponse(p,e)}var g={},f=["id","siteID"],p="";return{callBids:e}};t.exports=g},{"../adloader.js":13,"../bidfactory.js":14,"../bidmanager.js":15,"../utils.js":18}],5:[function(e,t,i){var n=e("../bidfactory.js"),r=e("../bidmanager.js"),d=e("../adloader.js"),a=function(){function e(e){"undefined"==typeof window.pp?d.loadScript(o,function(){t(e)}):t(e)}function t(e){for(var t=e.bids,n=0;n<t.length;n++){var r=t[n],d=i(r),a=new window.pp.Ad({cf:r.params.cf,cp:r.params.cp,ct:r.params.ct,cn:1,ca:window.pp.requestActions.BID,cu:s,adUnitId:r.placementCode,callback:d});a.display()}}function i(e){return function(t){a(e,t)}}function a(e,t){if(t){var i=e.params.cf.toUpperCase().split("X"),d=n.createBid(1);d.bidderCode=e.bidder,d.cpm=t.bidCpm,d.ad=t.html,d.width=i[0],d.height=i[1],d.adbbdr=e.adbbdr,d.adbuid=e.adbuid,d.adbbuid=e.adbbuid,r.addBidResponse(e.placementCode,d)}else{var a=n.createBid(2);a.bidderCode=e.bidder,a.adbbdr=e.adbbdr,a.adbuid=e.adbuid,a.adbbuid=e.adbbuid,r.addBidResponse(e.placementCode,a)}}var o=window.location.protocol+"//tag.contextweb.com/getjs.static.js",s=window.location.protocol+"//bid.contextweb.com/header/tag";return{callBids:e}};t.exports=a},{"../adloader.js":13,"../bidfactory.js":14,"../bidmanager.js":15}],6:[function(e,t,i){var n=e("../utils"),r=e("../bidfactory.js"),d=e("../bidmanager.js"),a=(e("../adloader"),e("../adbridg/analytics"),0),o=function(e,t){var i=n.createInvisibleIframe(!0);(document.body||document.head).appendChild(i),i.contentDocument.write("<!DOCTYPE html><html><head></head><body></body></html>"),i.contentDocument.close();var r=i.contentDocument.createElement("script");r.async=!0,r.type="text/javascript",r.src="http://apex.go.sonobi.com/trinity.js?key_maker="+JSON.stringify(e)+"&s="+Math.floor(1e3*Math.random()),r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,t(i.contentWindow.sbi_trinity,i.contentWindow.sbi_dc),i.parentNode.removeChild(i))}:r.onload=function(){t(i.contentWindow.sbi_trinity,i.contentWindow.sbi_dc),i.parentNode.removeChild(i)},i.contentDocument.head.appendChild(r)},s=function(){function e(e){var t=r.createBid(2);t.bidderCode="sonobi",t.adbuid=e.adbuid,t.adbbdr=e.adbbdr,t.adbbuid=e.adbbuid,d.addBidResponse(e.placementCode,t)}function t(t,i,n){var a=parseFloat(i.sbi_mouse);if(!a||a<=0)return void e(t);var o=r.createBid(1),s=i.sbi_size.split("x"),c="http://"+n+"apex.go.sonobi.com/sbi.js?as=dfp&aid="+i.sbi_aid;o.bidderCode="sonobi",o.ad='<script type="text/javascript" src="'+c+'"></script>',o.cpm=a,o.width=parseInt(s[0],10),o.height=parseInt(s[1],10),o.adbbdr=t.adbbdr,o.adbuid=t.adbuid,o.adbbuid=t.adbbuid,o.adbinfo=[1,n,i.sbi_aid,i.sbi_apoc].join(","),d.addBidResponse(t.placementCode,o)}return{callBids:function(e){var i={},r={};n._each(e.bids,function(e,t){a+=1;var n="adbs-"+a;i[n]=e,r[n]=e.params.pid}),o(r,n.tryBidHandler(function(e,r){n._each(e,function(e,d){var a=i[d]||!1;return a?void t(a,e,r):void n.logError("Sonobi received unmatched key: "+d)})}))}}};t.exports=s},{"../adbridg/analytics":8,"../adloader":13,"../bidfactory.js":14,"../bidmanager.js":15,"../utils":18}],7:[function(e,t,i){function n(e,t){e=String(e),l[e]&&(l[e].bidResponse=t)}function r(){o._each(l,function(e,t){if(e.bidResponse)c.addBidResponse(e.placementCode,e.bidResponse);else if(g){var i=s.createBid(2);i.bidderCode="sovrn",i.cpm=0,i.timeToRespond=g,i.adbbdr=e.bidRequest.adbbdr,i.adbuid=e.bidRequest.adbuid,i.adbbuid=e.bidRequest.adbbuid,i.width=e.bidRequest.width,i.height=e.bidRequest.height,c.addBidResponse(e.placementCode,i)}}),g=!1}var d,a=e("../constants.json"),o=e("../utils.js"),s=e("../bidfactory.js"),c=e("../bidmanager.js"),u=e("../adloader"),l={},g=!1,f=!1,p=o.tryBidHandler(function(){var e=document.createElement("img");e.src=f}),h=function(e,t){f||(f="//gslbeacon.lijit.com/beacon?viewId="+e+"_auction_api&rand="+(Math.round(8998*Math.random())+1e3)+"&informer="+t+"&type=fpads&loc="+encodeURIComponent(window.location.hostname)+"&v=1.2","complete"==document.readyState?setTimeout(p,100):document.addEventListener?document.addEventListener("readystatechange",function(){"complete"==document.readyState&&(document.removeEventListener("readystatechange",arguments.callee),p())}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),p())}))},b=function(){function e(e){var n=e.bids||[];i(t(n))}function t(e){var t,i={},n=[];e.forEach(function(e){i[o.getBidIdParamater("tagid",e.params)]=e});for(t in i)i.hasOwnProperty(t)&&n.push(i[t]);return n}function i(e){var t=window.location.host,i=window.location.pathname+location.search+location.hash,n=[];o._each(e,function(e){var t=o.getBidIdParamater("tagid",e.params),i=e.params.width,r=e.params.height;e.params.puser&&h(e.params.puser,e.params.pinformid),imp={id:o.getUniqueIdentifierStr(),banner:{w:i,h:r},tagid:t},n.push(imp),c.pbCallbackMap[imp.id]=e,l[String(imp.id)]={bidRequest:e,bidResponse:null,placementCode:e.placementCode}});var r={id:o.getUniqueIdentifierStr(),imp:n,site:{domain:t,page:i}};d=(new Date).getTime(),g=!1;var a="//"+f+"?callback=window.AdBridg.__sovrnResponse&br="+encodeURIComponent(JSON.stringify(r));u.loadScript(a,null)}var f="ap.lijit.com/rtb/bid";return window.AdBridg.__sovrnResponse=o.tryBidHandler(function(e){g=(new Date).getTime()-d,e&&e.id&&e.seatbid&&0!==e.seatbid.length&&e.seatbid[0].bid&&0!==e.seatbid[0].bid.length&&e.seatbid[0].bid.forEach(function(t){var i,r="",d=t.impid,o=c.getPlacementIdByCBIdentifer(d);if(o&&(r=o.placementCode,o.status=a.STATUS.GOOD,i=parseFloat(t.price),0!==i)){t.placementCode=r,t.size=o.sizes;var u=t.adm,l='<img src="'+t.nurl+'">',g=s.createBid(1);g.creative_id=t.id||"0",g.bidderCode="sovrn",g.cpm=i,g.width=o.params.width,g.height=o.params.height,g.ad=decodeURIComponent(u+l),g.adbbdr=o.adbbdr,g.adbuid=o.adbuid,g.adbbuid=o.adbbuid,g.adbinfo=[e.id,t.impid,t.id].join(","),n(d,g)}}),r()}),{callBids:e}};t.exports=b},{"../adloader":13,"../bidfactory.js":14,"../bidmanager.js":15,"../constants.json":16,"../utils.js":18}],8:[function(e,t,i){var n,r=e("../utils"),d=(e("../prebid"),e("../adloader")),a=e("./configuration"),o=e("./proxy"),s=1,c=2,u=3,l={id:1,units:{},bidders:{},bids:{},winners:{},noconf:[]},g=function(){l={id:++l.id,units:{},bidders:{},bids:{},winners:{},noconf:[]}},f=1,p=function(){return{loading:1,interactive:2,complete:3}[document.readyState]||0},h=function(){var e=(new Date).getTime();try{_base_timing=Math.round(performance.now()),e-=_base_timing,h=function(){return p()+"T"+Math.round(performance.now()).toString(36)},n=[f,e.toString(36),h()]}catch(t){f=0,h=function(){return p()+"T"+Math.max(0,(new Date).getTime()-e).toString(36)},n=[f,e.toString(36),p()+"T0"]}};h(),document.addEventListener?document.addEventListener("readystatechange",function(){3==p()&&document.removeEventListener("readystatechange",arguments.callee),n.push(h())}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){3==p()&&document.detachEvent("onreadystatechange",arguments.callee),n.push(h())});var b=function(){for(var e="",t=0;t<10;++t)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return e},m=b(),v=String((document.cookie.match(/_adb=([^;]+)/)||[]).pop());v&&"a2"==v.substr(0,2)||(document.cookie="_adb=; expires="+new Date(1970).toGMTString(),v="a2"+(new Date).getTime().toString(36)+b());var _=new Date;_.setTime(_.getTime()+31536e6),document.cookie="_adb="+v+"; expires="+_.toGMTString()+"; path=/";var y,B=0,w={},A=!1,I=function(){clearTimeout(y);var e=[];return r._each(w,function(t,i){e.push(i+":"+t.p+":"+t.d.join(","))}),w={},B=0,e.join("&e=")},S=function(e,t,i,n){clearTimeout(y);var d=e+"."+t;w[d]||(w[d]={p:h(),d:[]}),w[d].d.push(escape(JSON.stringify(i))),B+=1,y=setTimeout(C,2e3),n&&(A=!0,r.logError(n),A=!1)},C=function(){x(u,1,l.id+"//"+B)},x=function(e,t,i){var o=[2,v,m].join(","),s=I(),c="https:"==document.location.protocol?5051:5050,u="//adspsp.com:"+c+"/pt/"+a.getClientId()+"/"+e+"/"+t+"/?a="+o+"&b="+i+"&e="+s+"&c="+encodeURIComponent(r.getTopWindowUrl())+"&d="+encodeURIComponent(r.getTopWindowRef())+"&f="+n.join(".")+"&g="+h();d.trackPixel(u)},T=function(e){return String(e).replace(/[^\d\w]/,"")},E=function(e){var t,i,n,r;for("object"!=typeof e[0]&&(e=[e]),n=[],t=0;t<e.length;++t){for(r=[],i=0;i<e[t].length;++i)r.push((parseInt(e[t][i],10)||0).toString(36));n.push(r.join("`"))}return n.join(".")},D=function(e,t){return e+"^"+E(t)},P=function(e,t,i){var n,d;return d=[],r._each(t.bids,function(t,a){n=[],r._each(t,function(t,r){return i&&!i[a+"."+r]?void O(a,e,t):void n.push(t)}),d.push(a+"@"+n.join("~"))}),e+"^"+E(t.gpt_sizes)+":"+d.join(",")},R=function(e){return Math.floor(1e4*e).toString(36)},j=function(e,t,i,n,r){var d;return d=e+"@"+t.toString(36),1==e&&(d+="^"+E(n)+"~"+R(r)),d};i.biddingUnit=function(e,t){var i,n,d,a,o;i=e.adbuid,l.units[i]&&q(P(i,l.units[i])),d={},r._each(e.bids,function(e){n=e.adbbdr,a=T(e.adbbuid),d[n]=d[n]||{},o=D(a,e.adbsize),d[n][a]=o,l.bidders[n]=l.bidders[n]||{},l.bidders[n][a]&&k(n,i,l.bidders[n][a]),l.bidders[n][a]=o,l.bids[i]=l.bids[i]||{},l.bids[i][n+"."+a]={info:!1,encoded_bid_string:j(3,-1)}}),l.units[i]={gpt_sizes:t,bids:d}},i.biddingStarted=function(e){var t,i,n,d;return t=[],n={},r._each(e,function(e){return i=a.getBidderidFromAdapterCode(e.bidderCode),i&&l.bidders[i]?void r._each(e.bids,function(e){var t=T(e.adbbuid);return encoded_bid_string=D(t,e.adbsize),n[i+"."+t]=1,l.bidders[i][t]?void(encoded_bid_string!=l.bidders[i][t]&&(G(i,unitid,encoded_bid_string),l.units[unitid].bids[i][t]=encoded_bid_string)):void N(i,unitid,encoded_bid_string)}):(d=[],r._each(e.bids,function(e){d.push(D(T(e.adbbuid),e.adbsize))}),void M(i,e.bidderCode,d))}),r._each(l.units,function(e,i){t.push(P(i,e,n))}),l.noconf.length&&U(l.noconf),t.length>10?void z(t.length,t.join("`")):void x(s,1,l.id+"//"+t.length+"-"+t.join("_"))},i.winningUnitBid=function(e){var t;t=a.getUnitidFromPlacementCode(e.adUnitCode),l.winners[t]=e.adbbdr+"."+T(e.adbbuid)},i.biddingComplete=function(e){var t,i,n,d;r._each(l.units,function(o,s){return t=a.getPlacementCodeFromUnitid(s),e[t]?void r._each(e[t].bids,function(e){if(i=e.adbbdr+"."+T(e.adbbuid),d=e.size?e.size.split("x"):[0,0],n=j(e.statusCode,e.timeToRespond,e.adId,d,e.cpm),l.bids[s][i]){var t=!!e.adbinfo&&escape(e.adbinfo);l.bids[s][i]={info:t,encoded_bid_string:n}}else H(s,i,n)}):void F(s)})},i.adsDelivered=function(e){var t,i,n,d=[];r._each(e,function(e,o){if(t=a.getUnitidFromPlacementCode(o),!t)return void L(o,e.isEmpty);e.isEmpty?(unit_delivery_descriptor="!",J(t)):(i=l.winners[t],i?unit_delivery_descriptor=i:unit_delivery_descriptor="?",unit_delivery_descriptor+="^"+E(e.size)+"/"+Number(e.lineItemId).toString(36)+"."+Number(e.creativeId).toString(36)),n=[],r._each(l.bids[t],function(e,t){t==i&&e.info&&(unit_delivery_descriptor+="~`"+e.info+"`"),n.push(t+"-"+e.encoded_bid_string)});var s=t+"@"+unit_delivery_descriptor+":"+n.join(",");d.push(s)});var o=l.id+"//"+d.join("_");x(c,2,o)},i.reset=function(){g()},i.noUnitConfig=function(e){l.noconf.push(e)};var U=function(e){S(101,1,e,"AdBridg misconfiguration: no config defined for units "+e.join(", "))};i.noUnitBidders=function(e){S(102,1,e,"AdBridg misconfiguration: no bidders defined for "+e)},i.missingBidders=function(e){S(103,1,e,"This AdBridg installation does not support bidderids "+e)},i.unsupportedBidder=function(e,t){S(104,1,[e,t],"AdBridg does not support bidder yet: "+t)};var q=function(e){S(105,1,e,"AdBridg detected a duplicate bid config for unit "+e)},k=function(e,t,i){S(106,1,[e,t,i],"AdBridg detected a duplicate bidder config for bidder unit "+i)};i.nothingToDo=function(){S(107,1,0,"AdBridg cannot execute: no ads have been defined")},i.refreshUnknown=function(e,t,i){S(108,1,[e,t?1:0,i?1:0],"AdBridg was asked to refresh an unknown slot: "+e+" (gpt-known="+t+", bid-config="+i+")")},i.unknownDomId=function(e){S(201,1,e,"AdBridg received an unregistered domid: "+e)},i.missingPlaceholders=function(e,t,i,n,r){S(202,21,[e,t,i,n,r],"AdBridg did not receive display() calls for "+(1==t?"bidding":"traditional")+" units: "+r.join(", "))},i.noPlaceholders=function(e){S(203,1,e,"AdBridg could not render any "+(1==e?"bidding":"traditional")+" units!")};var M=function(e,t,i){S(301,1,[e,t,i])},N=function(e,t,i){S(302,1,[e,t,i])},G=function(e,t,i){S(303,1,[e,t,i])},z=function(e,t,i){S(304,1,[e,t,i])},O=function(e,t,i){S(305,1,[e,t,i])},F=function(e){S(306,1,e,"AdBridg auction results are missing bids on unit "+e)},H=function(e,t,i){S(307,1,[e,t,i])};i.timedOut=function(e){S(308,1,e,"AdBridg detected global timeout (@"+a.getGlobalTimeout()+"ms) happened while "+e+" bids still pending")},i.latencyBids=function(e){var t=a.getGlobalTimeout().toString(36);S(309,1,[t,e])},i.deliveredUnknownSlot=function(e,t,i,n){S(401,1,[e,t,i,n?1:0])},i.undeliveredAds=function(e,t){S(402,1,[e,t],"AdBridg did not detect GPT delivery for "+(1==e?"bidding":"traditional")+" slots: "+t.join(", "))};var L=function(e,t){S(403,1,[e,t?1:0])},J=function(e){S(404,1,e,"AdBridg received no ad from DFP for unitid "+e)};i.bidderDebug=function(e){S(405,1,e)},i.pbjsError=function(e){A||S(501,1,e)},i.preBidError=function(e){S(502,1,e,"AdBridg caught a pre-bid error: "+e)},i.postBidError=function(e){S(503,1,e,"AdBridg caught a post-bid error: "+e)},i.refreshError=function(e){S(504,1,e,"AdBridg caught a refresh error: "+e)},i.xtypeError=function(e){S(601,1,e,"AdBridg received an error in Xtype: "+e)},i.adbtg=function(e){S(701,1,e)},o.setAnalytics(i)},{"../adloader":13,"../prebid":17,"../utils":18,"./configuration":9,"./proxy":12}],9:[function(e,t,i){var n=e("../utils"),r=e("../adaptermanager"),d=e("./analytics"),a={id:"1339625",adapters:{8:{server:"adserver.adtechus.com",network:"10279.1",adjust:.8},9:{puser:"sitepoint1",pinformid:13386399},12:{adjust:.8},13:{network:560099}},timeout:2500,units:{"/7448792/SP2013_Home_300x250_1":[1,[[8,[300,250],3715432,"Home_300x250_1",170],[9,[300,250],322020],[10,[300,250],1,170451],[12,[],7645813],[13,[300,250],452942]]],"/7448792/SP2013_Home_300x250_3":[2,[[8,[300,250],3715434,"Home_300x250_3",170],[9,[300,250],322e3],[10,[300,250],2,176166],[12,[],7645802],[13,[300,250],452944]]],"/7448792/SP2013_Home_300x250_5":[3,[[8,[300,250],3715436,"Home_300x250_5",170],[9,[300,250],322021],[10,[300,250],3,176167],[12,[],7645829],[13,[300,250],452624]]],"/7448792/SP2013_Channel_728x90_1":[4,[[8,[728,90],3715437,"Channel_728x90_1",225],[9,[728,90],321999],[10,[728,90],4,176168],[12,[],7645774],[13,[728,90],452623]]],"/7448792/SP2013_Channel_300x250_1":[5,[[8,[300,250],3715432,"Channel_300x250_1",170],[9,[300,250],322020],[10,[300,250],5,176169],[12,[],7645813],[13,[300,250],452942]]],"/7448792/SP2013_Channel_300x250_3":[6,[[8,[300,250],3715434,"Channel_300x250_3",170],[9,[300,250],322e3],[10,[300,250],6,176170],[12,[],7645802],[13,[300,250],452944]]],"/7448792/SP2013_Channel_300x250_5":[7,[[8,[300,250],3715436,"Channel_300x250_5",170],[9,[300,250],322021],[10,[300,250],7,176171],[12,[],7645829],[13,[300,250],452624]]],"/7448792/SP2013_Articles_728x90_1":[8,[[8,[728,90],3715437,"Articles_728x90_1",225],[9,[728,90],321999],[10,[728,90],8,176172],[12,[],7645774],[13,[728,90],452623]]],"/7448792/SP_Articles_728x90_Bottom":[9,[[8,[728,90],3715435,"Articles_728x90_Bottom",225],[9,[728,90],322022],[10,[728,90],9,176173],[13,[728,90],452945]]],"/7448792/SP2013_Articles_300x250_1":[10,[[8,[300,250],3715432,"Articles_300x250_1",170],[9,[300,250],322020],[10,[300,250],10,176174],[12,[],7645813],[13,[300,250],452942]]],"/7448792/SP2013_Articles_300x600_1":[11,[[8,[300,600],3715438,"Articles_300x600_1",529],[8,[160,600],3715433,"Articles_160x600_Flex",154],[8,[300,250],3715436,"Articles_300x250_Flex",170],[9,[300,600],322002],[9,[160,600],322011],[9,[300,250],322021],[10,[300,600],111,176657],[10,[160,600],112,176658],[10,[300,250],113,176659],[12,[],7645806],[12,[],7645809],[12,[],7645829],[13,[300,600],452625],[13,[160,600],452941],[13,[300,250],452624]]],"/7448792/SP_Home_Leaderboard_1":[12,[[8,[728,90],3715437,"Home_728x90_1",225],[9,[728,90],321999],[10,[728,90],8,176172],[12,[],7645774],[13,[728,90],452623]]],"/7448792/SP_Home_Leaderboard_2":[13,[[10,[728,90],4,176168],[13,[728,90],452945]]],"/7448792/SP_Home_Leaderboard_3":[14,[[8,[728,90],3715435,"Articles_728x90_Bottom",225],[9,[728,90],322022],[10,[728,90],9,176173]]],"/7448792/SP_Home_HalfPage_1":[15,[[8,[160,600],3715433,"Home_Flex_160x600",154],[8,[300,250],3715436,"Home_Flex_300x250",170],[8,[300,600],3715438,"Home_Flex_300x600",529],[9,[160,600],322011],[9,[300,250],322021],[9,[300,600],322002],[10,[160,600],112,176658],[10,[300,250],113,176659],[10,[300,600],111,176657],[12,[],7645809],[12,[],7645813],[12,[],7645806],[13,[160,600],452941],[13,[300,250],452642],[13,[300,600],452625]]],"/7448792/SP_Channel_Leaderboard_1":[16,[[8,[728,90],3715437,"Home_728x90_1",225],[9,[728,90],321999],[10,[728,90],4,176168],[12,[],7645774],[13,[728,90],452623]]],"/7448792/SP_Channel_Leaderboard_2":[17,[[10,[728,90],8,176172],[13,[728,90],452945]]],"/7448792/SP_Channel_Leaderboard_4":[19,[[8,[728,90],3715435,"Articles_728x90_Bottom",225],[9,[728,90],322022],[10,[728,90],9,176173],[13,[728,90],452945]]]}},o={test:1,rubicon:2,pubmatic:3,openx:4,appnexus:5,criteo:6,amazon:7,aol:8,sovrn:9,index:10,sonobi:11,cpxi:12,pulsepoint:13},s={};n._each(o,function(e,t){s[""+e]=t});var c=function(e){return s[""+e]||0};i.getBidderidFromAdapterCode=function(e){return o[e]||0};var u=function(e,t){return(a.adapters[String(e)]||{})[t]};i.getGlobalTimeout=function(){return i.forcedBidder()?1e4:a.timeout};var l={};n._each(a.units,function(e,t){l[e[0]]=t}),i.getClientId=function(){return a.id},i.getUnitidFromPlacementCode=function(e){return(a.units[e]||[0])[0]},i.getPlacementCodeFromUnitid=function(e){return l[e]||0},i.forcedBidder=function(){return(String(window.location.search).match(/adb_force_bidder=(\d+)/)||[]).pop()},i.allowsBidder=function(){return(String(window.location.search).match(/adb_allow_bidder=(\d+)/)||[]).pop()};var g=function(e){try{for(var t=1,i=((document.cookie.match(/_adbv=([a-z0-9.-]+)/)||[]).pop()||"").split("."),n=0;n<i.length;++n){var r=i[n].split("-"),d=parseInt(r[0],36),a=parseInt(r[1],36);if(d==Number(e))return Math.max(.05,t*(a/100))}}catch(o){}return.05},f=function(e,t){var i=Math.floor(e/t)*t;return Math.max(.01,i).toFixed(2)+"-"+(i+t-.01).toFixed(2)};i.getPbjsBidderSettings=function(){return{standard:{adserverTargeting:[{key:"adb_adid",val:function(e){return e.adId}},{key:"adb_hbc",val:function(e){if(i.forcedBidder())return"";var t=e.cpm;return t<9.95?f(t,.05):"9.95-"}},{key:"adb_bdr",
val:function(e){return i.forcedBidder()?"force":e.bidder}}]}}},i.getPbjsUnitConfiguration=function(e,t,o,s){var l,f,p,h,b,m,v,_,y,B,w;if(f=a.units[e],!f)return d.noUnitConfig(e),!1;s=s||{},p={adbuid:f[0],code:e,bids:[]},h=[],b=[t];var A=parseInt(i.forcedBidder(),10),I=parseInt(i.allowsBidder(),10),S=g(f[0]);for(l=0;l<f[1].length;++l)if(m=f[1][l],_=m[0],B=m[1],y=m[2],v=c(_),!A||A==_)if(r.hasAdapter(v)){if(!u(_,"_force")||A==_||I==_){switch(w={},v){case"test":break;case"aol":w={adContainerId:o,server:u(_,"server"),network:u(_,"network"),adjust:u(_,"adjust"),placement:y,alias:m[3],sizeId:m[4],bidFloor:S};break;case"sovrn":w={tagid:y,width:B[0],height:B[1],puser:u(_,"puser"),pinformid:u(_,"pinformid")};break;case"index":w={id:y,width:B[0],height:B[1],siteID:m[3],timeout:1500};break;case"sonobi":w={pid:y};break;case"appnexus":case"cpxi":w={placementId:y,adjust:u(_,"adjust")};break;case"pulsepoint":w={cf:B.join("X"),cp:u(_,"network"),ct:y};break;default:d.unsupportedBidder(_,v);continue}b.push(B),p.bids.push({adbuid:f[0],adbbdr:_,adbbuid:y,adbsize:B,bidder:v,params:w})}}else h.push(_);return h.length&&d.missingBidders(h),p.bids.length?(p.sizes=n.combineSizeInputs.apply(null,b),p):(d.noUnitBidders(e),!1)}},{"../adaptermanager":1,"../utils":18,"./analytics":8}],10:[function(e,t,i){function n(){var e;a.bidderTimeout=o.getGlobalTimeout(),AdBridg.cmd.push=function(e){if(typeof e===l)try{e.call()}catch(t){d.logError("Error processing AdBridg command: "+(t.stack||t.message)),l===!1&&s.xtypeError(t.stack||t.message)}else d.logError("Commands written into AdBridg.cmd.push must wrapped in a function")},e=o.getPbjsBidderSettings(),e&&(a.bidderSettings=e),googletag.pubads().addEventListener("slotRenderEnded",function(e){c.gptSlotRendered(e)}),r()}function r(){for(;AdBridg.cmd.length;){var e=AdBridg.cmd.shift();AdBridg.cmd.push(e)}}var d=e("../utils"),a=e("../prebid"),o=e("./configuration"),s=e("./analytics"),c=e("./gpt-workflow"),u=e("./proxy"),l="function";if(window.AdBridg=window.AdBridg||{},AdBridg.cmd=AdBridg.cmd||[],!googletag||!googletag.cmd||googletag.cmd!==AdBridg.cmd){AdBridg.exists=!0;AdBridg.defineSlot=function(e,t,i,n){var r,a,s;return(a=c.getSlot(i))?(d.logError("AdBridg received a duplicate definition for slot/dom_id "+e+"/"+i),a.gpt_slot):(r=o.getPbjsUnitConfiguration(e,t,i,n),s=u.useGPT().defineSlot(e,t,i).addService(googletag.pubads()),c.storeSlot(e,i,r,s,t),s)},AdBridg.display=function(e){c.publisherCalledDisplay(e)};var g=!1;AdBridg.serve=function(e){if(g)return void d.logError("AdBridg attempting to serve more than once");g=!0;var t=c.getPbjsArray();a.addAdUnits(t),e=typeof e==l?e:function(){d.debugTurnedOn()&&console.log("AdBridg Result: ",arguments)},e=d.tryBidHandler(e),c.execute(e)},AdBridg.render=function(e,t){a.renderAd(e,t)},AdBridg.refresh=function(e){try{d.isArray(e)||(e=[e]);var t=[],i=!1;d._each(e,function(e){var n=e.getAdUnitPath(),r=e.getSlotElementId();return adb_slot=c.getSlot(r),adb_slot&&adb_slot.pbjs_config?void(adb_slot.queueRefresh()&&(i=!0)):(s.refreshUnknown(n+"/"+r,!!adb_slot,!(!adb_slot||!adb_slot.pbjs_config)),void t.push(e))}),t.length&&u.useGPT().pubads().refresh(t),i&&c.refresh()}catch(n){s.refreshError(n.stack||n.message)}},window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push(function(){try{n()}catch(e){s.preBidError(e.stack||e.message)}}),AdBridg.use_gpt_original=function(e){u.setGPT(e)}}},{"../prebid":17,"../utils":18,"./analytics":8,"./configuration":9,"./gpt-workflow":11,"./proxy":12}],11:[function(e,t,i){function n(e){var t={};e.listen=function(e,i){t[e]||(t[e]=[]),t[e].push(i)},e.forget=function(){t={}},e.trigger=function(i){var n=t[i]||[],r=Array.prototype.slice.call(arguments);r.unshift(e),c._each(n,function(e){e.apply(null,r)}),"destroy"==i&&(t={},e.listen=null,e.trigger=null)}}var r,d,a,o,s,c=e("../utils"),u=e("../prebid"),l=e("./analytics"),g=(e("./configuration"),e("./proxy")),f=5e3,p=500,h=1,b=2,m=3,v=4,_=0,y=1,B=2,w=3,A=1,I=2,S=function(){},C=!1,x=!1,T=!1,E=!1,D=!1;i.getSlot=function(e){return r.getSlotByDomId(e)},i.storeSlot=function(e,t,n,o,s){var u=i.getSlot(t);if(u)return c.logError("AdBridg received duplicate definition for slot/dom_id "+e+"/"+t),u.gpt_slot;!j(v)&&n&&l.biddingUnit(n,s);var u=new N(e,t,n,o),g=n?d:a;g.addSlot(u),r.addSlot(u)},i.getPbjsArray=function(){return d.getPbjsConfigurationArray()};var P=0,R=!1;i.refresh=function(){j(v)&&o.requestPbjs()},i.execute=function(e){if(s!=v){if(d.getCount()&&a.getCount())s=m,c.logMessage("AdBridg is executing mixed mode");else if(d.getCount())s=h,c.logMessage("AdBridg is executing bidding mode");else{if(!a.getCount())return void l.nothingToDo();s=b,c.logMessage("AdBridg is executing traditional mode")}"function"==typeof e&&(S=e),"complete"==document.readyState?(P=1,AdBridg.cmd.push(k)):document.addEventListener?document.addEventListener("readystatechange",function(){"loading"!=document.readyState&&(document.removeEventListener("readystatechange",arguments.callee),P=2,AdBridg.cmd.push(k))}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),P=3,AdBridg.cmd.push(k))}),R||(u.addCallback("allRequestedBidsBack",q),R=!0),j(m,h)&&(d.listen("reported",M),d.listen("slots_activated",function(){C&&d.requestAds()}),u.requestBids()),j(m)&&(googletag.pubads().disableInitialLoad(),E=!0),j(b)&&S.call(null,!1),j(m,b)&&(a.listen("reported",M),a.listen("slots_activated",a.requestAds),U())}},i.publisherCalledDisplay=function(e){var t=r.getSlotByDomId(e);return t?(t.activate(),j(v)?(t.queueRefresh(!0),void i.refresh()):void 0):void l.unknownDomId(e)},i.gptSlotRendered=function(e){var t=r.findGPTSlot(e.slot);return t?void t.render(e):void l.deliveredUnknownSlot(gpt_event.creativeId,gpt_event.lineItemId,gpt_event.size,gpt_event.isEmpty)};var j=function(){for(var e=0;e<arguments.length;++e)if(arguments[e]==s)return!0;return!1},U=function(){T||(T=!0,g.useGPT().enableServices(),r.each(function(e){e.activated&&g.useGPT().display(e.dom_id)}))},q=function(){if(!C){C=!0;var e=(j(v)?o:d,u.getBidResponses());l.biddingComplete(e),S(e),j(m,h,v)&&u.setTargetingForAdUnitsGPTAsync(),j(h)&&U(),j(m)&&x&&d.requestAds(),j(v)&&o.requestAds()}},k=function(){x=!0,j(m)?(a.requestAds(),C&&d.requestAds()):j(b)?a.renderTimeout(f):j(h)&&d.renderTimeout(f)},M=function(){if((!j(m)||d.reported&&a.reported)&&!D){D=!0;var e=j(v)?o:r,t=e.getDeliveredSlots(),i=e.getDeliveredSlotCodes();i.length&&l.adsDelivered(t),c.logMessage("AdBridg observed "+i.length+" GPT unit renderings: "+i.join(", "));var n=e.getEmptySlotCodes();n.length&&c.logMessage("(of those, "+n.length+" rendered empty: "+n.join(", ")+")"),C=!1,s=v}},N=function(e,t,i,r){this.placement_code=e,this.dom_id=t,this.pbjs_config=i,this.gpt_slot=r,this.activated=!1,this.halfactivated=!1,this.rendered=!1;var d=this;n(this),this.pbjs_config&&this.gpt_slot.setTargeting("adb_bdr","none");var a=function(e,t,i){e.style.width&&String(e.style.width).replace("px","")!=t&&(e.style.width=t+"px"),e.style.height&&String(e.style.height).replace("px","")!=i&&(e.style.height=i+"px"),e.getAttribute("width")&&e.getAttribute("width")!=t&&e.setAttribute("width",t),e.getAttribute("height")&&e.getAttribute("height")!=i&&e.setAttribute("height",i)};this.resizeContainer=function(e,t){var i=document.getElementById(d.dom_id),n=i.getElementsByTagName("div"),r=i.getElementsByTagName("iframe"),o=RegExp("^google_ads_iframe_/"+d.placement_code);c._each(n,function(i){var n=String(i.id);n.match(o)&&!n.match("_hidden_")&&a(i,e,t)}),c._each(r,function(i){var n=String(i.id);n.match(o)&&!n.match("_hidden_")&&a(i,e,t)})},this.activate=function(){d.activated=!0,T&&!j(v)&&d.callDisplay(),d.trigger("activate")},this.queueRefresh=function(e){if(e)d.halfactivated=!0;else if(!d.rendered)return c.logMessage("AdBridg ignored refresh request for "+d.placement_code+" because it has not yet rendered the last request."),!1;return d.forget(),d.rendered=!1,o.addSlot(d),!0},this.callDisplay=function(){g.useGPT().display(d.dom_id),j(v)&&E&&g.useGPT().pubads().refresh([d.gpt_slot]),d.halfactivated=!1},this.clearTargeting=function(){var e=[],t=d.gpt_slot.getTargetingMap();for(var i in t)"adb_hbc"!=i&&"adb_bdr"!=i&&"adb_adid"!=i&&e.push([i,t[i]]);d.gpt_slot.clearTargeting();for(var n=0;n<e.length;++n)d.gpt_slot.setTargeting(e[n][0],e[n][1]);d.gpt_slot.setTargeting("adb_bdr","none")},this.render=function(i){return d.rendered?void c.logMessage("AdBridg received two render() calls for unit "+e+" with DOM ID "+t):(d.rendered={creativeId:i.creativeId||0,lineItemId:i.lineItemId||0,size:i.size,isEmpty:i.isEmpty},void d.trigger("render"))}},G=function(e){this.reported=!1;var t=[],r={},d=0,a=0,B=0,S=!1,C=!1,x=!1,T=!1,E=this,R=[];n(this),this.getSlots=function(){return r};var U=function(e){return C?void c.logMessage("AdBridg slot activated after ads requested: ",e.placement_code):(a+=1,void(E.isActivated()&&E.trigger("slots_activated")))},q=function(e){j(h,b)&&k(I),B||E.clearTargeting(),B+=1,E.renderTimeout(p)},k=function(t){if(!x&&e!=_&&e!=w){x=!0;var i=E.getInactiveSlotCodes();i.length&&(l.missingPlaceholders(s,e,t,P,i),i.length==d&&l.noPlaceholders(e)),j(h,b)&&c.logMessage("AdBridg requested "+a+" "+(e==y?"bidding":"traditional")+" units from GPT: "+E.getActiveSlotCodes())}};this.each=function(e){c._each(r,e)},this.isActivated=function(){return d==a},this.isRendered=function(){return d&&d==B},this.addSlot=function(i){if(e==w&&(!j(v)||!this.isRendered()&&(S||C))){for(var n=0;n<R.length;++n)if(R[n]===i)return;return void R.push(i)}t.push(i),r[i.dom_id]=i,d+=1,i.listen("activate",U),i.listen("render",q)},this.requestPbjs=function(){if(!S&&!C){for(;R.length;)E.addSlot(R.shift());var e=[];l.reset(),c._each(E.getSlots(),function(t){t.pbjs_config&&(e.push(t.pbjs_config),l.biddingUnit(t.pbjs_config,t.pbjs_config.sizes))}),S=!0,e.length?u.requestBidsForAdUnits(e):E.requestAds()}},this.requestAds=function(){if(!C&&e!=_){if(C=!0,j(v)&&e==w){D=!1;var t=E.getActivatedGPTSlots();t.length&&(c.logMessage("AdBridg is requesting "+t.length+" refresh units from GPT: "+E.getActiveSlotCodes()),g.useGPT().pubads().refresh(t)),E.each(function(e){e.halfactivated&&e.callDisplay()})}if(j(m)){k(A);var t=E.getActivatedGPTSlots();t.length&&(c.logMessage("AdBridg is requesting "+t.length+" "+(e==y?"bidding":"traditional")+" units from GPT: "+E.getActiveSlotCodes()),g.useGPT().pubads().refresh(t,{changeCorrelator:!1}))}E.renderTimeout(f)}},this.renderTimeout=function(e){clearTimeout(T),E.isRendered()?E.reportRender():T=setTimeout(E.reportRender,e)},this.reportRender=function(){if(clearTimeout(T),!E.reported&&e!=_){var t=E.getUndeliveredSlotCodes();if(t.length&&l.undeliveredAds(e,t),E.reported=!0,E.trigger("reported"),e==w&&(M(),E.forget(),r=!1,o=new G(w),R.length)){for(;R.length;)o.addSlot(R.shift());c.logMessage("Next round of refreshes queued for 500ms: "+o.getActiveSlotCodes().join(", ")),setTimeout(c.tryBidHandler(i.refresh),500)}}},this.findGPTSlot=function(e){var t;for(dom_id in r)if(r.hasOwnProperty(dom_id)&&(t=r[dom_id],t.gpt_slot===e))return t;return!1},this.getCount=function(){return d},this.getSlotByDomId=function(e){return r[e]||!1},this.getNewestSlotByPlacementCode=function(e){for(var i=t.length-1;i>=0;--i)if(t[i].placement_code==e)return t[i];return!1},this.getPbjsConfigurationArray=function(){var e=[];return E.each(function(t){t.pbjs_config&&e.push(t.pbjs_config)}),e},this.getInactiveSlotCodes=function(){var e=[];return E.each(function(t,i){t.activated||e.push(t.placement_code)}),e},this.getActiveSlotCodes=function(){var e=[];return E.each(function(t,i){t.activated&&!t.halfactivated&&e.push(t.placement_code)}),e},this.getActivatedGPTSlots=function(){var e=[];return E.each(function(t,i){t.activated&&!t.halfactivated&&e.push(t.gpt_slot)}),e},this.getUndeliveredSlotCodes=function(){var e=[];return E.each(function(t,i){t.activated&&!t.rendered&&e.push(t.placement_code)}),e},this.getDeliveredSlotCodes=function(){var e=[];return E.each(function(t,i){t.rendered&&e.push(t.placement_code)}),e},this.getEmptySlotCodes=function(){var e=[];return E.each(function(t,i){t.rendered&&t.rendered.isEmpty&&e.push(t.placement_code)}),e},this.getDeliveredSlots=function(){var e={};return E.each(function(t,i){t.rendered&&(e[t.placement_code]=t.rendered)}),e},this.clearTargeting=function(){E.each(function(e){e.clearTargeting()})}};r=new G(_),d=new G(y),a=new G(B),o=new G(w),g.setResize(function(e,t,i){var n=r.getNewestSlotByPlacementCode(e);return n?void n.resizeContainer(t,i):c.logMessage("AdBridg was unable to locate slot for resizing"+[e,t,i].join("/"))})},{"../prebid":17,"../utils":18,"./analytics":8,"./configuration":9,"./proxy":12}],12:[function(e,t,i){var n=[];i.analytics=function(){n.push(Array.prototype.slice.apply(arguments))},i.setAnalytics=function(e){for(n.push=function(t){var i=t.shift();"function"==typeof e[i]&&e[i].apply(null,t)};n.length;)n.push(n.shift())};var r=[];i.waitForPbjs=function(e){r.push(e)},i.setPbjs=function(e){for(r.push=function(t){t.call(null,e)};r.length;)r.push(r.shift())};var d=!1;i.setGPT=function(e){d=e},i.useGPT=function(){return d?d:window.googletag};var a=function(){};i.setResize=function(e){a=e},i.resize=function(){a.apply(null,arguments)}},{}],13:[function(e,t,i){i.loadScript=function(e,t){var i=document.createElement("script");i.type="text/javascript",i.async=!0,t&&"function"==typeof t&&(i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,t())}:i.onload=function(){t()}),i.src=e;var n=document.getElementsByTagName("head");n=n.length?n:document.getElementsByTagName("body"),n.length&&(n=n[0],n.insertBefore(i,n.firstChild))},i.trackPixel=function(e){try{if(e+="&rnd="+Math.random()){var t=document.createElement("img");t.src=e}}catch(i){}}},{}],14:[function(e,t,i){function n(e){function t(){switch(n){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}var i=r.getUniqueIdentifierStr(),n=e||0;this.bidderCode="",this.width=0,this.height=0,this.statusMessage=t(),this.statusCode=e,this.adId=i,this.getStatusCode=function(){return n},this.getSize=function(){return this.width+"x"+this.height}}var r=e("./utils.js");i.createBid=function(e){return new n(e)}},{"./utils.js":18}],15:[function(e,t,i){function n(e,t){var i={},n=c.bidderSettings||{};return e&&t&&n&&n[e]?r(i,n[e],t):S[e]?r(i,S[e],t):t&&n&&(n[u.JSON_MAPPING.BD_SETTING_STANDARD]||(n[u.JSON_MAPPING.BD_SETTING_STANDARD]={adserverTargeting:[{key:"hb_bidder",val:function(e){return e.bidderCode}},{key:"hb_adid",val:function(e){return e.adId}},{key:"hb_pb",val:function(e){return e.pbMg}},{key:"hb_size",val:function(e){return e.size}}]}),t.usesGenericKeys=!0,r(i,n[u.JSON_MAPPING.BD_SETTING_STANDARD],t)),i}function r(e,t,i){var n=t[u.JSON_MAPPING.ADSERVER_TARGETING];return i.size=i.getSize(),l._each(n,function(t){var n=t.key,r=t.val;if(l.isFn(r))try{e[n]=r(i)}catch(d){l.logError("bidmanager","ERROR",d)}else e[n]=r}),e}function d(e){var t=[e];a(p,t)}function a(e,t){var i;if(l.isArray(e))for(i=0;i<e.length;i++){var n=e[i];o(n,t)}else o(e,t)}function o(e,t){if("function"==typeof e)try{e.apply(c,t)}catch(i){l.logError("Error executing callback function: "+i.message)}}function s(e){for(var t=0;t<c.adUnits.length;t++){var i=c.adUnits[t];if(i.code===e){var n=_[e].bidsReceivedCount;n===i.bids.length&&d(e)}}}var c,u=e("./constants.json"),l=e("./utils.js"),g=e("./adbridg/proxy");g.waitForPbjs(function(e){c=e});var f="function",p=[],h=[],b=null,m={},v={};i.pbCallbackMap=v;var _={};i.pbBidResponseByPlacement=_;var y={};i._adResponsesByBidderId=y;var B=0;i.bidRequestCount=B;var w=0;i.bidResponseRecievedCount=w;var A=!1,I=!1,S={},C={},x=!1,T={};i.getPlacementIdByCBIdentifer=function(e){return v[e]},i.incrementBidCount=function(){B++},i.getBidResponseByAdUnit=function(e){return _},i.clearAllBidResponses=function(e){A=!1,I=!1,B=0,w=0,h.called=!1;for(var t in this.pbBidResponseByPlacement)delete this.pbBidResponseByPlacement[t]},i.addBidResponse=function(e,t){var i={};if(t){t.requestTimestamp=C[t.bidderCode],t.responseTimestamp=(new Date).getTime(),t.timeToRespond=t.responseTimestamp-t.requestTimestamp,w++,2===t.getStatusCode()&&(t.cpm=0);var r=l.getPriceBucketString(t.cpm,t.height,t.width);t.pbLg=r.low,t.pbMg=r.med,t.pbHg=r.high,x&&(T[t.adbuid]=T[t.adbuid]||[],T[t.adbuid].push([t.adbbdr,t.adbbuid,t.getStatusCode(),t.cpm||0,t.timeToRespond])),t.adUnitCode=e,t.bidder=t.bidderCode;var d={};t.bidderCode&&0!==t.cpm&&(d=n(t.bidderCode,t),t.adserverTargeting=d),t.adId&&(y[t.adId]=t),e&&_[e]?(i=_[e],i.bids.push(t),i.bidsReceivedCount++):l.logError("Internal error in bidmanager.addBidResponse. Params: "+e+" & "+t)}else i=this.createEmptyBidResponseObj();_[e]=i,this.checkIfAllBidsAreIn(e)},i.createEmptyBidResponseObj=function(){return{bids:[],allBidsAvailable:!1,bidsReceivedCount:0}},i.registerDefaultBidderSetting=function(e,t){S[e]=t},i.registerBidRequestTime=function(e,t){C[e]=t},i.executeCallbackFromTimeout=function(){var e=B-w;e>0&&(x=(new Date).getTime(),g.analytics("timedOut",e)),i.executeCallback()},i.executeCallback=function(){if(typeof c.registerBidCallbackHandler===f&&!I)try{c.registerBidCallbackHandler(),I=!0}catch(e){I=!0,l.logError("Exception trying to execute callback handler registered : "+e.message)}if(h.called!==!0){var t=[];a(h,t),h.called=!0}b&&(a(b),b=null)},i.allBidsBack=function(){return A},i.setBidderMap=function(e){m=e},i.checkIfAllBidsAreIn=function(e){0!==B&&B===w&&(A=!0),s(e),A&&(x&&(g.analytics("latencyBids",T),T={},x=!1),this.executeCallback())},i.addOneTimeCallback=function(e){b=e},i.addCallback=function(e,t,i){t.id=e,u.CB.TYPE.ALL_BIDS_BACK===i?h.push(t):u.CB.TYPE.AD_UNIT_BIDS_BACK===i&&p.push(t)}},{"./adbridg/proxy":12,"./constants.json":16,"./utils.js":18}],16:[function(e,t,i){t.exports={JSON_MAPPING:{PL_CODE:"code",PL_SIZE:"sizes",PL_BIDS:"bids",BD_BIDDER:"bidder",BD_ID:"paramsd",BD_PL_ID:"placementId",ADSERVER_TARGETING:"adserverTargeting",BD_SETTING_STANDARD:"standard"},DEBUG_MODE:"adb_debug",STATUS:{GOOD:"good",TIMEOUT:"timed out"},CB:{TYPE:{ALL_BIDS_BACK:"allRequestedBidsBack",AD_UNIT_BIDS_BACK:"adUnitBidsBack"}},objectType_function:"function",objectType_undefined:"undefined",objectType_object:"object",objectType_string:"string",objectType_number:"number"}},{}],17:[function(e,t,i){function n(){for(var e=0;e<m.que.length;e++)typeof m.que[e].called===I&&(m.que[e].call(),m.que[e].called=!0)}function r(e,t){var i=0;if(i=typeof e===I||null===e?m.bidderTimeout:e,!d())return m.adbvalsct.shift(),void _.logMessage("No adUnits configured. No bids requested.");if(setTimeout(y.executeCallbackFromTimeout,i),t&&_.isArray(t))for(var n=0;n<t.length;n++){for(var r=0;r<m.adUnits.length;r++)m.adUnits[r].code===t[n]&&(T=[m.adUnits[r]]);o(),a()}else T=m.adUnits,o(),a()}function d(){return!(!m.adUnits||0===m.adUnits.length)}function a(e){var t=Object.keys(E).map(function(e){return E[e]});typeof e===A&&t.sort(e),B.callBids(t)}function o(){for(var e=0;e<T.length;e++){var t=T[e][v.JSON_MAPPING.PL_BIDS],i=T[e][v.JSON_MAPPING.PL_CODE];s(T[e][v.JSON_MAPPING.PL_CODE],T[e][v.JSON_MAPPING.PL_SIZE],t),y.addBidResponse(i)}for(e=0;e<x.length;e++)x[e].loadPreBid();y.setBidderMap(E)}function s(e,t,i){for(var n=0;n<i.length;n++){y.incrementBidCount();var r=i[n];r.placementCode=e,r.sizes=t;var d=i[n][v.JSON_MAPPING.BD_BIDDER],a=E[d];if(typeof a===I){var o={bidderCode:d,bids:[]};o.bids.push(r),E[d]=o}else a.bids.push(r)}}function c(e){if(!P&&(P=!0,e.cpm&&Math.random()<R)){var t=Math.floor(4*Math.random()),i=e.cpm;1==t?i+=.25:2==t?i+=.5:3==t&&(i+=1);var n=e.bid.adId;if(e.bid.adId="ADBTG"+t,e.bid.adserverTargeting.adb_adid=e.bid.adId,i<9.95){var r=.05*Math.floor(i/.05);e.bid.adserverTargeting.adb_hbc=Math.max(.01,r).toFixed(2)+"-"+(r+.04).toFixed(2)}else e.bid.adserverTargeting.adb_hbc="9.95-";y._adResponsesByBidderId[e.bid.adId]=y._adResponsesByBidderId[n],w.analytics("adbtg",[e.bid.adbuid,t])}return e}function u(e){var t={};return e&&0!==e.length&&(e.sort(function(e,t){return t.cpm-e.cpm}),t=c(e[0])),t.bid}function l(e,t,i){var n=[];if(0!==i.bids.length)for(var r=0;r<i.bids.length;r++){var d=i.bids[r];if(d.usesGenericKeys)n.push({cpm:d.cpm,bid:d});else{var a=i.bids[r].adserverTargeting;for(var o in a)if(a.hasOwnProperty(o))try{_.logMessage("Attempting to set key value for placement code: "+e+" slot: "+t+" key: "+o+" value: "+encodeURIComponent(a[o])),t.setTargeting(o,encodeURIComponent(a[o]))}catch(s){_.logError("Problem setting key value pairs in slot: "+s.message)}}}else _.logMessage("No bids eligble for adUnit code : "+e);if(0!==n.length){var c=u(n);j(c),w.analytics("winningUnitBid",c);var l=c.adserverTargeting;for(var o in l)if(l.hasOwnProperty(o))try{_.logMessage("Attempting to set key value for placement code: "+e+" slot: "+t+" key: "+o+" value: "+encodeURIComponent(l[o])),t.setTargeting(o,encodeURIComponent(l[o]))}catch(s){_.logError("Problem setting key value pairs in slot: "+s.message)}}P=!0}function g(e){var t={};return e?(t=y.pbBidResponseByPlacement[e],t?t:y.createEmptyBidResponseObj()):y.pbBidResponseByPlacement}function f(e){var t=[],i=[],n={};if(e)for(var r=0;r<e.length;r++){var d=e[r];n=p(d),d.usesGenericKeys?i.push({cpm:d.cpm,bid:d}):D[n.adUnitCode]=n.adserverTargeting,t.push(n)}if(0!==i.length){var a=u(i),o=a.adserverTargeting;D[n.adUnitCode]=o}return t}function p(e){var t={};if(e){var i=JSON.stringify(e);t=JSON.parse(i),delete t.pbLg,delete t.pbMg,delete t.pbHg}return t}function h(){y.clearAllBidResponses(),E={}}function b(e){var t=e;h(),r(t)}var m={que:[]},v=e("./constants.json"),_=e("./utils.js"),y=e("./bidmanager.js"),B=e("./adaptermanager"),w=e("./adbridg/proxy"),A="function",I="undefined",S="object",C="string";t.exports=m;var x=[],T=[],E={},D={};m.bidderTimeout=m.bidderTimeout||3e3,m.logging=_.logging||!1,m.libLoaded=!0,m.adUnits=m.adUnits||[],m.adbvalsct=[],m.que.push=function(e){if(typeof e===A)try{e.call()}catch(t){_.logError("Error processing command :"+t.message)}else _.logError("Commands written into pbjs.que.push must wrapped in a function")};var P=!1,R=0,j=function(e){try{var t=e.adbuid;if(!e.cpm||!t)return;for(var i=Math.round(100*e.cpm),n=((document.cookie.match(/_adbv=([a-z0-9.-]+)/)||[]).pop()||"").split("."),r=[],d=0;d<n.length;++d){var a=n[d].split("-"),o=parseInt(a[0],36)||0,s=parseInt(a[1],36)||0;o==t&&(s=i,t=!1),o&&s>5&&r.push(a[0]+"-"+s.toString(36))}t&&r.push(parseInt(t,10).toString(36)+"-"+i.toString(36));var c=new Date;c.setTime(c.getTime()+36e5),document.cookie="_adbv="+r.join(".")+"; expires="+c.toGMTString()+"; path=/"}catch(u){}};m.getAdserverTargetingForAdUnitCode=function(e){return m.getBidResponses(e),e?D[e]:D},m.getAdserverTargeting=function(){return m.getAdserverTargetingForAdUnitCode()},m.getBidResponses=function(e){var t={},i=[],n={};if(e)t=g(e),i=[],t&&t.bids&&(i=f(t.bids)),n={bids:i};else{t=g();for(var r in t)t.hasOwnProperty(r)&&(t&&t[r]&&t[r].bids&&(i=f(t[r].bids)),n[r]={bids:i})}return n},m.getBidResponsesForAdUnitCode=function(e){return m.getBidResponses(e)},m.setTargetingForAdUnitsGPTAsync=function(e){if(!window.googletag||!window.googletag.pubads()||!window.googletag.pubads().getSlots())return void _.logError("window.googletag is not defined on the page");var t=e;typeof e===C?t=[e]:typeof e===S&&(t=e);var i={},n=0;if(t)for(n=0;n<t.length;n++)for(var r=t[n],d=window.googletag.pubads().getSlots(),a=0;a<d.length;a++)d[a].getAdUnitPath()===r&&(i=g(r),l(r,d[a],i));else{var d=window.googletag.pubads().getSlots();for(n=0;n<d.length;n++){var o=d[n].getAdUnitPath();o&&(i=g(o),l(o,d[n],i))}}},m.setTargetingForGPTAsync=function(){m.setTargetingForAdUnitsGPTAsync()},m.allBidsAvailable=function(){return y.allBidsBack()},m.renderAd=function(e,t){if(_.logMessage("Calling renderAd with adId :"+t),e&&t)try{var i=y._adResponsesByBidderId[t];if(i){var n=i.height,r=i.width,d=i.adUrl,a=i.ad;if("aol"==i.bidderCode)try{i.adbinfo+=","+(String(a).match(/\<img[^\>]+(adserver\.adtechus\.com[^"']+)/)||[]).pop()}catch(o){}a?(e.write(a),e.close(),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=r,e.defaultView.frameElement.height=n),w.resize(i.adUnitCode,r,n)):d?(e.write('<IFRAME SRC="'+d+'" FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true" WIDTH="'+r+'" HEIGHT="'+n+'"></IFRAME>'),e.close(),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=r,e.defaultView.frameElement.height=n),w.resize(i.adUnitCode,r,n)):_.logError("Error trying to write ad. No ad for bid response id: "+t)}else _.logError("Error trying to write ad. Cannot find ad by given id : "+t)}catch(o){_.logError("Error trying to write ad Id :"+t+" to the page:"+o.message)}else _.logError("Error trying to write ad Id :"+t+" to the page. Missing document or adId")},m.requestBidsForAdUnit=function(e){h(),r(e)},m.requestBidsForAdUnits=function(e){if(!e||e.constructor!==Array)return void _.logError("requestBidsForAdUnits must pass an array of adUnits");h();var t=m.adUnits.slice(0);m.adUnits=e,r(),m.adUnits=t},m.removeAdUnit=function(e){if(e)for(var t=0;t<m.adUnits.length;t++)m.adUnits[t].code===e&&(m.adUnits=m.adUnits.splice(t,1))},m.requestBids=function(e){if(e){var t=e.adUnitCodes,i=e.adUnits,n=e.timeout,d=e.bidsBackHandler,a=m.adUnits.slice(0);typeof d===A&&y.addOneTimeCallback(d),t&&_.isArray(t)?(h(),r(n,t)):i&&_.isArray(i)?(h(),m.adUnits=i,r(n)):b(n),m.adUnits=a}else b()},m.addAdUnits=function(e){_.isArray(e)?m.adUnits.push.apply(m.adUnits,e):typeof e===S&&m.adUnits.push(e)},m.addCallback=function(e,t){var i=null;return e&&t&&typeof t===A?(i=_.getUniqueIdentifierStr,y.addCallback(i,t,e),i):(_.logError("error registering callback. Check method signature"),i)},m.removeCallback=function(e){},w.setPbjs(m),n()},{"./adaptermanager":1,"./adbridg/proxy":12,"./bidmanager.js":15,"./constants.json":16,"./utils.js":18}],18:[function(e,t,i){function n(){return _()+Math.random().toString(16).substr(2)}function r(){return window.console&&window.console.log}var d=e("./constants.json"),a=e("./adbridg/proxy"),o="function",s="object",c="string",u="number",l=!1,g=5,f=20,p=20,h="Array",b="String",m="Function",v=Object.prototype.hasOwnProperty;Array.prototype.slice;i.replaceTokenInString=function(e,t,i){return this._each(t,function(t,n){t=void 0===t?"":t;var r=i+n.toUpperCase()+i,d=new RegExp(r,"g");e=e.replace(d,t)}),e};var _=function(){var e=0;return function(){return e++,e}}();i.getUniqueIdentifierStr=n,i.getBidIdParamater=function(e,t){return t&&t[e]?t[e]:""},i.tryAppendQueryString=function(e,t,i){return i?e+=t+"="+encodeURIComponent(i)+"&":e},i.parseQueryStringParameters=function(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(t+=i+"="+encodeURIComponent(e[i])+"&");return t},i.parseSizesInput=function(e,t){var i,n=[];if(typeof e===c){var r=e.split(","),d=/^(\d)+x(\d)+$/i;if(r)for(var a in r)hasOwn(r,a)&&r[a].match(d)&&n.push(r[a])}else if(typeof e===s){var o=e.length;if(o>0)if(2!==o||typeof e[0]!==u&&typeof e[0]!==c||typeof e[1]!==u&&typeof e[1]!==c)for(var l=0;l<o;l++)n.push(this.parseGPTSingleSizeArray(e[l]));else n.push(this.parseGPTSingleSizeArray(e))}if(t)return n;var g=n.length;if(g>0&&(i="size="+n[0],g>1)){i+="&promo_sizes=";for(var f=1;f<g;f++)i+=n[f]+=",";i&&","===i.charAt(i.length-1)&&(i=i.slice(0,i.length-1))}return i},i.combineSizeInputs=function(){var e,t,n,r,d={},a=[];for(e=0;e<arguments.length;++e)for(n=i.parseSizesInput(arguments[e],!0),t=0;t<n.length;++t)r=n[t],d[r]||(d[r]=1,r=r.split("x"),a.push(r));return 1==a.length?a.pop():a},i.parseGPTSingleSizeArray=function(e){if(i.isArray(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1]))return e[0]+"x"+e[1]},i.getTopWindowUrl=function(){try{return window.top.location.href}catch(e){return window.location.href}},i.getTopWindowRef=function(){try{return window.top.document.referrer}catch(e){return window.document.referrer}},i.logMessage=function(e){B()&&r()&&console.log("MESSAGE: "+e)},i.hasConsoleLogger=r;var y=function(e){return e?window.console.error?"error":"log":""}(r());i.logging=!1,i.enableDebug=function(){i.logging=!0};var B=function(){return i.logging===!1&&l===!1&&(i.logging=!!w(d.DEBUG_MODE),l=!0),!!i.logging};i.debugTurnedOn=B,i.logError=function(e,t,i){var n=t||"ERROR";if(a.analytics("pbjsError",e),B()&&r())try{console[y].call(console,n+": "+e,i||"")}catch(d){console.log(n+": "+e,i||"")}},i.createInvisibleIframe=function(e){var t=document.createElement("iframe");return t.id=n(),t.height=0,t.width=0,t.border="0px",t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.border="0",t.scrolling="no",t.frameBorder="0",e||(t.src="about:self"),t.style="display:none",t};var w=function(e){var t="[\\?&]"+e+"=([^&#]*)",i=new RegExp(t),n=i.exec(window.location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))};i.getPriceBucketString=function(e){var t="",i="",n="",r=0,d={low:t,med:i,high:n};try{r=parseFloat(e),r&&(r>g?d.low=g.toFixed(2):d.low=(Math.floor(2*e)/2).toFixed(2),r>f?d.med=f.toFixed(2):d.med=(Math.floor(10*e)/10).toFixed(2),r>p?d.high=p.toFixed(2):d.high=(Math.floor(100*e)/100).toFixed(2))}catch(a){this.logError("Exception parsing CPM :"+a.message)}return d},i.hasValidBidRequest=function(e,t,i){for(var n=0;n<t.length;n++){var r=!1;if(this._each(e,function(e,i){i===t[n]&&(r=!0)}),!r)return this.logError("Params are missing for bid request. One of these required paramaters are missing: "+t,i),!1}return!0},i.addEventHandler=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!0):e.attachEvent&&e.attachEvent("on"+t,i)},i.isA=function(e,t){try{return toString.call(e)==="[object "+t+"]"}catch(i){switch(t){case h:return e.constructor===Array.prototype.constructor;case b:return e.constructor===String.prototype.constructor;case m:return typeof e==o}return!1}},i.isFn=function(e){return this.isA(e,m)},i.isStr=function(e){return this.isA(e,b)},i.isArray=function(e){return this.isA(e,h)},i.isEmpty=function(e){if(!e)return!0;if(this.isArray(e)||this.isStr(e))return!(e.length>0);for(var t in e)if(v.call(e,t))return!1;return!0},i._each=function(e,t){if(!this.isEmpty(e)){if(this.isFn(e.forEach))return e.forEach(t);var i=0,n=e.length;if(n>0)for(;i<n;i++)t(e[i],i,e);else for(i in e)v.call(e,i)&&t(e[i],i,e)}},i.extend=function(e,t){return e=e||{},this._each(t,function(i,n){typeof t[n]===s?e[n]=this.extend(e[n],t[n]):e[n]=t[n]}),e},i.tryBidHandler=function(e){return function(){try{e.apply(null,arguments)}catch(t){a.analytics("postBidError",t.stack||t.message)}}},i.BreakException={}},{"./adbridg/proxy":12,"./constants.json":16}]},{},[10]);