<template name="groupCampSearch"> <div class = "container">
     <div class="page-header">
          <h1 class="text-center">
               <img src="https://lightcastletech.files.wordpress.com/2013/04/campfire.png" width="80">
               Group Camp
               <small>Find Your Trip</small>
          </h1>
     </div>

     {{#if getUserName}}
     {{else}}
          <div class="alert alert-info alert-dismissible" role="alert">
               You must have a username in order to sign up for Group Camps. Please got to the <a href="/userprofiles"> User Profiles </a> page to claim one.
          </div>
     {{/if}}

     <form class="form-inline">
          <div class="input-group">
               <div class="input-group-addon"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span></div>
               <input type="text" class="js-searchTag form-control" size=25>
               <span class="input-group-btn">
                    <input class="js-searchTags btn btn-danger" type="submit" value="Search by Tag">
               </span>
          </div>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <button class="js-seeAll form-control btn-default">See All</button>
          {{#if getUserName}}
               <button class="js-seeMine form-control btn-default btn-sm">See My Trips</button>
               <button class="js-seeAmGoing form-control btn-default btn-sm">See Trips I'm Going On</button>
          {{/if}}
     </form>

     <br>

     {{#if hasTrips}}
          {{#each trip in getTrips}}
                    {{> GroupCampListing trip = trip}}
          {{/each}}
     {{else}}
          <p class="text-center">
               <h2><small>
                    No Trips Found
               </small></h2>
          </p>
     {{/if}}
</div></template>




<template name="GroupCampListing">
     <div class="alert {{getAlertColor}}" role="alert">
          <div class="row">
               <div class="col-md-6">
                    <a href="/GroupCampDetails/{{trip._id}}">
                         <h1>{{trip.title}}</h1>
                    </a>

                    <em>{{trip.message}}</em>

                    <h6>
                         {{#each tag in trip.tags}}
                              {{#if isSearchedTag tag}}
                                   <span class="label label-danger">{{tag}}</span>
                              {{else}}
                                   <span class="label label-default">{{tag}}</span>
                              {{/if}}
                         {{/each}}
                    </h6>

               </div>

               <div class="col-md-3">
                    <img src={{trip.picture}} class="img-thumbnail">
               </div>

               <div class="col-md-3">

                    {{#if getUserName}}
                         {{#if isMine}}
                              <button class = "js-cancel btn-sm btn-danger btn-block">Cancel Trip!</button>
                         {{else}}
                              {{#if amGoing}}
                                   <button class = "js-changeAmGoing amGoing-color-{{trip._id}} btn-sm btn-default btn-block">
                                        <span class="amGoing-text-{{trip._id}}">Remove Me!</span>
                                   </button>
                              {{else}}
                                   <button class = "js-changeAmGoing amGoing-color-{{trip._id}} btn-sm {{getAddButtonColor}} btn-block">
                                        <span class="amGoing-text-{{trip._id}}">Add Me!</span>
                                   </button>
                              {{/if}}
                         {{/if}}
                    {{/if}}

                    <small>
                         {{#if trip.destination}}
                              In <em>{{trip.destination}}</em>
                         {{/if}}

                         {{#if trip.from}}
                              from <em>{{getFrom}}</em>
                         {{/if}}


                         {{#if trip.to}}
                              to <em>{{getTo}}</em>
                         {{/if}}

                         {{#if trip.cost}}
                              for <em>${{trip.cost}}</em>
                         {{/if}}

                         {{#if trip.author}}
                              by
                              {{#if isMine}}
                                   <span class="label label-primary">Me</span>
                              {{else}}
                                   <span class="label label-info">{{trip.author}}</span>
                              {{/if}}
                         {{/if}}
                         .
                         <br><br>

                         {{#if getUserName}}
                         {{else}}
                              <br>
                         {{/if}}

                         {{#if hasEnoughTravelers}}
                              <br>
                              <div class="progress">
                                   <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" style="width: 100%">
                                        This trip has enough people!
                                   </div>
                              </div>
                         {{else}}
                              <p class="text-right">
                                   <small>
                                        {{#if trip.threshold}}
                                             {{getTravelerCount trip}} Going / {{trip.threshold}} Needed
                                        {{/if}}
                                   </small>
                              </p>

                              <div class="progress">
                                   <div class="progress-bar progress-bar-warning progress-bar-striped" role="progressbar" style="width: {{getProgressBarWidth}}%"></div>
                              </div>
                         {{/if}}

                    </small>

               </div>
          </div>
     </div>
</template>




<template name="GroupCampDetails"> <div class = "container">
     <div class="page-header">
          <h1 class="text-center">
               <img src="https://lightcastletech.files.wordpress.com/2013/04/campfire.png" width="80">
               Group Camp
               <small>Trip Details</small>
          </h1>
     </div>
     <div class="page-header">
          <p class = "text-center">
               <h1>
                    {{title}} <br>
                    <small>{{message}}</small>
               </h1>
               <h5>
                    {{#each tag in tags}}
                         <span class="label label-default">{{tag}}</span>
                    {{/each}}
               </h5>
          </p>
     </div>

     {{#if picture}}
          <p class="text-center">
               <img src={{picture}} width = 750>
               <br><br><br>
          </p>
     {{/if}}

     {{#if description}}
          <blockquote>
               {{description}}
          </blockquote>
     {{/if}}

     In <em>{{destination}}</em>
     from <em>{{getFrom}}</em>
     to <em>{{getTo}}</em>

     by
     {{#if isMine}}
          <span class="label label-primary">Me</span>
     {{else}}
          <span class="label label-info">{{author}}</span>
     {{/if}}

     on <em>{{timestamp}}</em>.

     <br><br>
     At least {{threshold}} people needed for this trip.

     Travelers Signed Up ({{travelers.length}} so far):<br>
     {{#each traveler in travelers}}
          {{#if isMe traveler}}
               <span class="label label-primary">Me</span>
          {{else}}
               <span class="label label-info">{{traveler}}</span>
          {{/if}}
     {{/each}}

     {{#if link}}
          <br><br>
          <p class = "text-right">
               <a href={{link}}>Click Here</a> for more information.
          </p>
     {{/if}}
</div></template>
