<template name="groupCampSearch"> <div class = "container">
     <div class="page-header">
          <h1 class="text-center">
               <img src="https://lightcastletech.files.wordpress.com/2013/04/campfire.png" width="80">
               <strong>Group Camp</strong>
               <small>Find Your Trip</small>
          </h1>
     </div>

     {{#if getUserName}}
     {{else}}
          <div class="alert alert-danger alert-dismissible" role="alert">
               You must have a username in order to sign up for Group Camps. Please got to the <a href="/userprofiles" class="alert-link"> User Profiles </a> page to claim one.
          </div>
     {{/if}}

     <form class="form-inline">
          <div class="input-group">
               <div class="input-group-addon"><span class="glyphicon glyphicon-tag" aria-hidden="true"></span></div>
               <input type="text" class="js-searchTag form-control" size=25>
               <span class="input-group-btn">
                    <input class="js-searchTags btn btn-danger" type="submit" value="Search by Tag">
               </span>
          </div>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <button class="js-seeAll form-control btn-default">See All</button>
          {{#if getUserName}}
               <button class="js-seeMine form-control btn-default btn-sm">See My Trips</button>
               <button class="js-seeAmGoing form-control btn-default btn-sm">See Trips I'm Going On</button>
               <button class="form-control btn-default btn-sm" data-toggle="modal" data-target="#addTrip" onclick="event.preventDefault()">Design a Trip</button>
          {{/if}}
     </form>

     <br>

     {{#if hasTrips}}
          {{#each trip in getTrips}}
                    {{> GroupCampListing trip = trip}}
          {{/each}}
     {{else}}
          <p class="text-center">
               <h2><small>
                    No Trips Found
               </small></h2>
          </p>
     {{/if}}


     <!-- Modal -->
     <div class="modal fade" id="addTrip" role="dialog">
          <div class="modal-dialog modal-lg">
               <div class="modal-content">

                    <div class="modal-header">
                         <button type="button" class="close" data-dismiss="modal">&times;</button>
                         <h1 class="text-center">
               			<img src="https://lightcastletech.files.wordpress.com/2013/04/campfire.png" width="80">
               			<strong>Group Camp</strong>
               			<small>Design Your Trip</small>
               		</h1>
                    </div>

                    <div class="modal-body">
                         <form>
               			<div class="row">
               				<div class="col-md-8">
               					<!-- TITLE -->
               					<div class="js-titleGroup form-group">
               						<label>Title<small>*</small></label>
               						<div class="input-group">
               							<div class="input-group-addon"><span class="glyphicon glyphicon-tent" aria-hidden="true"></span></div>
               							<input type="text" class="js-title form-control" placeholder="Name of Group Camp Trip">
               						</div>
               					</div>
               				</div>
               				<div class="col-md-4">
               					<!-- TAGS -->
               					<div class="js-tagsGroup form-group">
               						<label>Tags</label>
               						<div class="input-group">
               							<div class="input-group-addon"><span class="glyphicon glyphicon-tags" aria-hidden="true"></span></div>
               							<input type="text" class="js-tags form-control" placeholder="tag1, tag2, tag3">
               						</div>
               					</div>
               				</div>
               			</div>	<br>

               			<div class="row">
               				<div class="col-md-8">
               					<!-- MESSAGE -->
               					<div class="js-messageGroup form-group">
               						<label>Message</label>
               						<div class="input-group">
               							<div class="input-group-addon"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span></div>
               							<input type="text" class="js-message form-control" placeholder="Promote Your Camp">
               						</div>
               					</div>
               				</div>
               				<div class="col-md-4">
               					<!-- DESTINATION -->
               					<div class="js-destinationGroup form-group">
               						<label>Destination<small>*</small></label>
               						<div class="input-group">
               							<div class="input-group-addon"><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span></div>
               							<input type="text" class="js-destination form-control" placeholder="Where Your Camp is Going to Go">
               						</div>
               					</div>
               				</div>
               			</div>	<br>

               			<div class="row">
               				<div class="col-md-4">
               					<!-- FROM -->
               					<div class="js-fromGroup form-group">
               					  	<label>From<small>*</small></label>
               				          <div class="input-group">
               				               <div class="input-group-addon"><span class="glyphicon glyphicon-time" aria-hidden="true"></span></div>
               				               <input type="date" class="js-from form-control" placeholder="Departure Date">
               				          </div>
               					</div>
               				</div>
               				<div class="col-md-4">
               					<!-- To -->
               					<div class="js-toGroup form-group">
               					  	<label>To<small>*</small></label>
               				          <div class="input-group">
               				               <div class="input-group-addon"><span class="glyphicon glyphicon-hourglass" aria-hidden="true"></span></div>
               				               <input type="date" class="js-to form-control" placeholder="Arival Date">
               				          </div>
               					</div>
               				</div>
               				<div class="col-md-2">
               					<!-- COST -->
               					<div class="js-costGroup form-group">
               					  	<label>Individual Cost</label>
               				          <div class="input-group">
               				               <div class="input-group-addon"><span class="glyphicon glyphicon-usd" aria-hidden="true"></span></div>
               				               <input type="number" class="js-cost form-control">
               				          </div>
               					</div>
               				</div>
               				<div class="col-md-2">
               					<!-- THRESHOLD -->
               					<div class="js-thresholdGroup form-group">
               					  	<label>Minimum Group Size<small>*</small></label>
               				          <div class="input-group">
               				               <div class="input-group-addon"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span></div>
               				               <input type="number" class="js-threshold form-control">
               				          </div>
               					</div>
               				</div>
               			</div> <br>

               	          <!-- DESCRIPTION -->
               			<div class="js-descriptionGroup form-group">
               			 	<label>Description</label>
               				<textarea class="js-description form-control" rows=2></textarea>
               			</div>	<br>

               			<div class="row">
               				<div class="col-md-6">
               					<!-- LINK -->
               					<div class="js-linkGroup form-group">
               						<label>Link <small>URL</small></label>
               						<div class="input-group">
               				               <div class="input-group-addon"><span class="glyphicon glyphicon-link" aria-hidden="true"></span></div>
               				               <input type="url" class="js-link form-control">
               				          </div>
               					</div>
               				</div>
               				<div class="col-md-6">
               					<!-- Picture -->
               					<div class="js-pictureGroup form-group">
               						<label>Picture <small>URL</small></label>
               						<div class="input-group">
               				               <div class="input-group-addon"><span class="glyphicon glyphicon-picture" aria-hidden="true"></span></div>
               				               <input type="url" class="js-picture form-control">
               				          </div>
               					</div>
               				</div>
               			</div>	<br><br>

               		     <button class="js-submit btn btn-danger form-control">Submit</button> <br>
               		</form>
                    </div>

               </div>
          </div>
     </div>

</div></template>




<template name="GroupCampListing">
     <div class="alert alert-{{getColor}}" role="alert">
          <div class="row">
               <div class="col-md-6">
                    <a data-toggle="modal" data-target="#details-{{trip._id}}">
                         <h1><strong>{{trip.title}}</strong></h1>
                    </a>

                    <em>{{trip.message}}</em>

                    <h6>
                         {{#each tag in trip.tags}}
                              {{#if isSearchedTag tag}}
                                   <span class="label label-danger">{{tag}}</span>
                              {{else}}
                                   <span class="label label-{{getColor}}">{{tag}}</span>
                              {{/if}}
                         {{/each}}
                    </h6>

               </div>

               <div class="col-md-3">
                    <img src={{trip.picture}} class="img-thumbnail">
               </div>

               <div class="col-md-3">

                    {{#if getUserName}}
                         {{#if isMine}}
                              <button class = "js-cancel btn-sm btn-danger btn-block">Cancel Trip!</button>
                         {{else}}
                              {{#if amGoing}}
                                   <button class = "js-changeAmGoing amGoing-color-{{trip._id}} btn-sm btn-default btn-block">
                                        <span class="amGoing-text-{{trip._id}}">Remove Me!</span>
                                   </button>
                              {{else}}
                                   <button class = "js-changeAmGoing amGoing-color-{{trip._id}} btn-sm btn-{{getColor}} btn-block">
                                        <span class="amGoing-text-{{trip._id}}">Add Me!</span>
                                   </button>
                              {{/if}}
                         {{/if}}
                    {{/if}}

                    <small>
                         {{#if trip.destination}}
                              In <em>{{trip.destination}}</em>
                         {{/if}}

                         {{#if trip.from}}
                              from <em>{{getFrom}}</em>
                         {{/if}}


                         {{#if trip.to}}
                              to <em>{{getTo}}</em>
                         {{/if}}

                         {{#if trip.cost}}
                              for <em>${{trip.cost}}</em>
                         {{/if}}

                         {{#if trip.author}}
                              by
                              {{#if isMine}}
                                   <span class="label label-primary">Me</span>
                              {{else}}
                                   <span class="label label-info">{{trip.author}}</span>
                              {{/if}}
                         {{/if}}
                         .
                         <br><br>

                         {{#if getUserName}}
                         {{else}}
                              <br>
                         {{/if}}

                         {{#if hasEnoughTravelers}}
                              <p class="text-right">
                                   <small>
                                        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                                        &nbsp;&nbsp;
                                   </small>
                              </p>

                              <div class="progress">
                                   <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" style="width: 100%">
                                        This trip has enough people!
                                   </div>
                              </div>
                         {{else}}
                              <p class="text-right">
                                   <small>
                                        {{#if trip.threshold}}
                                             {{getTravelersNeeded trip}} Travelers Needed
                                             &nbsp;
                                        {{/if}}
                                   </small>
                              </p>

                              <div class="progress">
                                   <div class="progress-bar progress-bar-warning progress-bar-striped" role="progressbar" style="width: {{getProgressBarWidth}}%"></div>
                              </div>
                         {{/if}}

                    </small>

               </div>
          </div>
     </div>

     <!-- Modal -->
     <div class="modal fade" id="details-{{trip._id}}" role="dialog">
          <div class="modal-dialog modal-lg">
               <div class="modal-content">

                    <div class="modal-header">
                         <button type="button" class="close" data-dismiss="modal">&times;</button>
                         <p class = "text-center">
                              <h2>
                                   <strong>{{trip.title}}</strong> <br>
                                   <small>{{trip.message}}</small>
                              </h2>
                              <h5>
                                   {{#each tag in trip.tags}}
                                        <span class="label label-default">{{tag}}</span>
                                   {{/each}}
                              </h5>
                         </p>
                    </div>

                    <div class="modal-body">
                         {{#if trip.picture}}
                              <p class="text-center">
                                   <img src={{trip.picture}} width = 750>
                                   <br><br><br>
                              </p>
                         {{/if}}

                         {{#if trip.description}}
                              <blockquote>
                                   {{trip.description}}
                              </blockquote>
                         {{/if}}

                         In <em>{{trip.destination}}</em>
                         from <em>{{getFrom}}</em>
                         to <em>{{getTo}}</em>.

                         Created by
                         {{#if isMine}}
                              <span class="label label-primary">Me</span>
                         {{else}}
                              <span class="label label-info">{{trip.author}}</span>
                         {{/if}}

                         on <em>{{getTimestamp}}</em>.

                         <br><br>
                         At least {{trip.threshold}} people needed for this trip.

                         Travelers Signed Up ({{trip.travelers.length}} so far):<br>
                         {{#each traveler in trip.travelers}}
                              {{#if isMe traveler}}
                                   <span class="label label-primary">Me</span>
                              {{else}}
                                   <span class="label label-info">{{traveler}}</span>
                              {{/if}}
                         {{/each}}

                         <br><br>

                         {{#if trip.link}}
                              <p class = "text-right">
                                   <a href={{trip.link}}>Click Here</a> for more information.
                              </p>
                         {{/if}}
                    </div>
               </div>
          </div>
     </div>

</template>
